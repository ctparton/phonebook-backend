(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},20:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(14),r=n.n(o),u=(n(20),n(4)),l=n(2),i=function(e){var t=e.searchTerm,n=e.searchContacts;return c.a.createElement("div",null,"Filter contacts: ",c.a.createElement("input",{value:t,onChange:n}))},s=function(e){var t=e.newContactHandler,n=e.name,a=e.newNameHandler,o=e.number,r=e.newNumberHandler;return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:t},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:n,onChange:a})),c.a.createElement("div",null,"number: ",c.a.createElement("input",{value:o,onChange:r})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add"))))},m=function(e){var t=e.contacts,n=e.searchTerm,a=e.handleDelete;return c.a.createElement("div",null,t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,e.name," ",e.number),c.a.createElement("button",{onClick:function(){return a(e.id)}},"delete"))})))},d=n(3),f=n.n(d),h="/api/persons/",b=function(){return f.a.get("".concat(h)).then((function(e){return e.data}))},v=function(e){return f.a.post("".concat(h),e).then((function(e){return e.data}))},g=function(e){return f.a.delete("".concat(h,"/").concat(e))},p=function(e,t){return f.a.put("".concat(h,"/").concat(e),t)},E=function(e){var t=e.message;if(!t)return null;return c.a.createElement("div",{style:t.success?{color:"green",fontWeight:"bold",padding:"10px"}:{color:"red",fontWeight:"bold",padding:"10px"}},t.text)},w=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(""),d=Object(l.a)(r,2),f=d[0],h=d[1],w=Object(a.useState)(""),O=Object(l.a)(w,2),j=O[0],C=O[1],k=Object(a.useState)(""),x=Object(l.a)(k,2),T=x[0],y=x[1],S=Object(a.useState)(null),H=Object(l.a)(S,2),N=H[0],D=H[1];Object(a.useEffect)((function(){b().then((function(e){return o(e)})).catch((function(e){D({text:" ".concat(e," Could not fetch contacts from server"),success:!1}),setTimeout((function(){return D(null)}),5e3)}))}),[]);return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(E,{message:N}),c.a.createElement(i,{searchTerm:f,searchContacts:function(e){console.log(e.target.value),h(e.target.value)}}),c.a.createElement("h3",null,"Add new contact"),c.a.createElement(s,{newContactHandler:function(e){e.preventDefault();var t={name:j,key:j,number:T},a=n.map((function(e){return e.name})).indexOf(j);a>-1?window.confirm("".concat(j," is already in the phonebook, replace the old number with a new one"))&&p(n[a].id,Object(u.a)(Object(u.a)({},n[a]),{},{number:T})).then((function(e){console.log(e),o(n.map((function(e){return e.id!==n[a].id?e:Object(u.a)(Object(u.a)({},n[a]),{},{number:T})}))),D({text:"Updated ".concat(j),success:!0}),setTimeout((function(){return D(null)}),5e3)})).catch((function(e){console.log(e),D({text:"".concat(e," Data on ").concat(j," has already been removed from the server"),success:!1}),setTimeout((function(){return D(null)}),1e4)})):(o(n.concat(t)),v(t).then((function(e){console.log(e),D({text:"Added ".concat(t.name),success:!0}),setTimeout((function(){return D(null)}),5e3)})).catch((function(e){D({text:"".concat(e," Could not add ").concat(t.name," "),success:!1}),setTimeout((function(){return D(null)}),5e3)})))},name:j,newNameHandler:function(e){console.log(e.target.value),C(e.target.value)},number:T,newNumberHandler:function(e){console.log(e.target.value),y(e.target.value)}}),c.a.createElement("h3",null,"Numbers"),c.a.createElement(m,{contacts:n,searchTerm:f,handleDelete:function(e){console.log("User wishes to delete ".concat(e)),g(e).then((function(e){return console.log(e)})),o(n.filter((function(t){return t.id!==e})))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.065b9121.chunk.js.map